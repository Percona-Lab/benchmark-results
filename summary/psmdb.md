---

title: "Percona Server for MongoDB: CPU and I/O scalability for
WiredTiger and RocksDB"
author: "Percona Lab"
generated on:May 30, 2016
output:
  md_document:
    variant: markdown_github

---


# Percona Server for MongoDB 3.2.4-1.rc2 - CPU and I/O scalability 

## Setup

* Setup information pending 

## Configuration reference

### rocks0

storage.rocksdb.configString:
"bytes_per_sync=16m;max_background_flushes=3;max_background_compactions=12;max_write_buffer_number=4;max_bytes_for_level_base=1500m;target_file_size_base=200m;level0_slowdown_writes_trigger=12;write_buffer_size=400m;compression_per_level=kSnappyCompression:kSnappyCompression:kSnappyCompression:kSnappyCompression:kSnappyCompression:kSnappyCompression:kSnappyCompression;optimize_filters_for_hits=true"

### wt0

--syncdelay=900 --wiredTigerJournalCompressor=none --wiredTigerCacheSizeGB=$cache_size

### wt1

--syncdelay=900 --wiredTigerJournalCompressor=zlib --wiredTigerCacheSizeGB=$cache_size

### wt2

--syncdelay=900 --wiredTigerJournalCompressor=snappy --wiredTigerCacheSizeGB=$cache_size

## CPU Scalability tests 

![plot of chunk cpu](figure/cpu-1.png)![plot of chunk cpu](figure/cpu-2.png)![plot of chunk cpu](figure/cpu-3.png)![plot of chunk cpu](figure/cpu-4.png)

## Memory Scalability tests

The memory scalability tests were all done using 100 client threads.
All graphs faceted by memory and configuration. 

![plot of chunk mem](figure/mem-1.png)![plot of chunk mem](figure/mem-2.png)![plot of chunk mem](figure/mem-3.png)![plot of chunk mem](figure/mem-4.png)![plot of chunk mem](figure/mem-5.png)![plot of chunk mem](figure/mem-6.png)![plot of chunk mem](figure/mem-7.png)![plot of chunk mem](figure/mem-8.png)

## Throughput detail 

### Thread scalability 

![plot of chunk tps_ts](figure/tps_ts-1.png)![plot of chunk tps_ts](figure/tps_ts-2.png)![plot of chunk tps_ts](figure/tps_ts-3.png)![plot of chunk tps_ts](figure/tps_ts-4.png)![plot of chunk tps_ts](figure/tps_ts-5.png)![plot of chunk tps_ts](figure/tps_ts-6.png)![plot of chunk tps_ts](figure/tps_ts-7.png)![plot of chunk tps_ts](figure/tps_ts-8.png)![plot of chunk tps_ts](figure/tps_ts-9.png)![plot of chunk tps_ts](figure/tps_ts-10.png)![plot of chunk tps_ts](figure/tps_ts-11.png)![plot of chunk tps_ts](figure/tps_ts-12.png)![plot of chunk tps_ts](figure/tps_ts-13.png)![plot of chunk tps_ts](figure/tps_ts-14.png)![plot of chunk tps_ts](figure/tps_ts-15.png)![plot of chunk tps_ts](figure/tps_ts-16.png)![plot of chunk tps_ts](figure/tps_ts-17.png)![plot of chunk tps_ts](figure/tps_ts-18.png)![plot of chunk tps_ts](figure/tps_ts-19.png)![plot of chunk tps_ts](figure/tps_ts-20.png)![plot of chunk tps_ts](figure/tps_ts-21.png)![plot of chunk tps_ts](figure/tps_ts-22.png)![plot of chunk tps_ts](figure/tps_ts-23.png)![plot of chunk tps_ts](figure/tps_ts-24.png)![plot of chunk tps_ts](figure/tps_ts-25.png)![plot of chunk tps_ts](figure/tps_ts-26.png)![plot of chunk tps_ts](figure/tps_ts-27.png)![plot of chunk tps_ts](figure/tps_ts-28.png)![plot of chunk tps_ts](figure/tps_ts-29.png)![plot of chunk tps_ts](figure/tps_ts-30.png)![plot of chunk tps_ts](figure/tps_ts-31.png)![plot of chunk tps_ts](figure/tps_ts-32.png)![plot of chunk tps_ts](figure/tps_ts-33.png)![plot of chunk tps_ts](figure/tps_ts-34.png)![plot of chunk tps_ts](figure/tps_ts-35.png)![plot of chunk tps_ts](figure/tps_ts-36.png)![plot of chunk tps_ts](figure/tps_ts-37.png)![plot of chunk tps_ts](figure/tps_ts-38.png)![plot of chunk tps_ts](figure/tps_ts-39.png)![plot of chunk tps_ts](figure/tps_ts-40.png)![plot of chunk tps_ts](figure/tps_ts-41.png)![plot of chunk tps_ts](figure/tps_ts-42.png)![plot of chunk tps_ts](figure/tps_ts-43.png)![plot of chunk tps_ts](figure/tps_ts-44.png)![plot of chunk tps_ts](figure/tps_ts-45.png)![plot of chunk tps_ts](figure/tps_ts-46.png)![plot of chunk tps_ts](figure/tps_ts-47.png)![plot of chunk tps_ts](figure/tps_ts-48.png)![plot of chunk tps_ts](figure/tps_ts-49.png)![plot of chunk tps_ts](figure/tps_ts-50.png)![plot of chunk tps_ts](figure/tps_ts-51.png)![plot of chunk tps_ts](figure/tps_ts-52.png)![plot of chunk tps_ts](figure/tps_ts-53.png)![plot of chunk tps_ts](figure/tps_ts-54.png)![plot of chunk tps_ts](figure/tps_ts-55.png)![plot of chunk tps_ts](figure/tps_ts-56.png)![plot of chunk tps_ts](figure/tps_ts-57.png)![plot of chunk tps_ts](figure/tps_ts-58.png)![plot of chunk tps_ts](figure/tps_ts-59.png)![plot of chunk tps_ts](figure/tps_ts-60.png)![plot of chunk tps_ts](figure/tps_ts-61.png)![plot of chunk tps_ts](figure/tps_ts-62.png)![plot of chunk tps_ts](figure/tps_ts-63.png)![plot of chunk tps_ts](figure/tps_ts-64.png)![plot of chunk tps_ts](figure/tps_ts-65.png)![plot of chunk tps_ts](figure/tps_ts-66.png)![plot of chunk tps_ts](figure/tps_ts-67.png)![plot of chunk tps_ts](figure/tps_ts-68.png)![plot of chunk tps_ts](figure/tps_ts-69.png)![plot of chunk tps_ts](figure/tps_ts-70.png)![plot of chunk tps_ts](figure/tps_ts-71.png)![plot of chunk tps_ts](figure/tps_ts-72.png)

### Memory scalability

![plot of chunk tps_ms](figure/tps_ms-1.png)![plot of chunk tps_ms](figure/tps_ms-2.png)![plot of chunk tps_ms](figure/tps_ms-3.png)![plot of chunk tps_ms](figure/tps_ms-4.png)![plot of chunk tps_ms](figure/tps_ms-5.png)![plot of chunk tps_ms](figure/tps_ms-6.png)![plot of chunk tps_ms](figure/tps_ms-7.png)![plot of chunk tps_ms](figure/tps_ms-8.png)![plot of chunk tps_ms](figure/tps_ms-9.png)![plot of chunk tps_ms](figure/tps_ms-10.png)![plot of chunk tps_ms](figure/tps_ms-11.png)![plot of chunk tps_ms](figure/tps_ms-12.png)![plot of chunk tps_ms](figure/tps_ms-13.png)![plot of chunk tps_ms](figure/tps_ms-14.png)![plot of chunk tps_ms](figure/tps_ms-15.png)![plot of chunk tps_ms](figure/tps_ms-16.png)![plot of chunk tps_ms](figure/tps_ms-17.png)![plot of chunk tps_ms](figure/tps_ms-18.png)![plot of chunk tps_ms](figure/tps_ms-19.png)![plot of chunk tps_ms](figure/tps_ms-20.png)![plot of chunk tps_ms](figure/tps_ms-21.png)![plot of chunk tps_ms](figure/tps_ms-22.png)![plot of chunk tps_ms](figure/tps_ms-23.png)![plot of chunk tps_ms](figure/tps_ms-24.png)![plot of chunk tps_ms](figure/tps_ms-25.png)![plot of chunk tps_ms](figure/tps_ms-26.png)![plot of chunk tps_ms](figure/tps_ms-27.png)![plot of chunk tps_ms](figure/tps_ms-28.png)![plot of chunk tps_ms](figure/tps_ms-29.png)![plot of chunk tps_ms](figure/tps_ms-30.png)![plot of chunk tps_ms](figure/tps_ms-31.png)![plot of chunk tps_ms](figure/tps_ms-32.png)![plot of chunk tps_ms](figure/tps_ms-33.png)![plot of chunk tps_ms](figure/tps_ms-34.png)![plot of chunk tps_ms](figure/tps_ms-35.png)![plot of chunk tps_ms](figure/tps_ms-36.png)![plot of chunk tps_ms](figure/tps_ms-37.png)![plot of chunk tps_ms](figure/tps_ms-38.png)![plot of chunk tps_ms](figure/tps_ms-39.png)![plot of chunk tps_ms](figure/tps_ms-40.png)![plot of chunk tps_ms](figure/tps_ms-41.png)![plot of chunk tps_ms](figure/tps_ms-42.png)![plot of chunk tps_ms](figure/tps_ms-43.png)![plot of chunk tps_ms](figure/tps_ms-44.png)![plot of chunk tps_ms](figure/tps_ms-45.png)![plot of chunk tps_ms](figure/tps_ms-46.png)![plot of chunk tps_ms](figure/tps_ms-47.png)![plot of chunk tps_ms](figure/tps_ms-48.png)![plot of chunk tps_ms](figure/tps_ms-49.png)![plot of chunk tps_ms](figure/tps_ms-50.png)![plot of chunk tps_ms](figure/tps_ms-51.png)![plot of chunk tps_ms](figure/tps_ms-52.png)![plot of chunk tps_ms](figure/tps_ms-53.png)![plot of chunk tps_ms](figure/tps_ms-54.png)![plot of chunk tps_ms](figure/tps_ms-55.png)![plot of chunk tps_ms](figure/tps_ms-56.png)![plot of chunk tps_ms](figure/tps_ms-57.png)![plot of chunk tps_ms](figure/tps_ms-58.png)![plot of chunk tps_ms](figure/tps_ms-59.png)![plot of chunk tps_ms](figure/tps_ms-60.png)![plot of chunk tps_ms](figure/tps_ms-61.png)![plot of chunk tps_ms](figure/tps_ms-62.png)![plot of chunk tps_ms](figure/tps_ms-63.png)![plot of chunk tps_ms](figure/tps_ms-64.png)![plot of chunk tps_ms](figure/tps_ms-65.png)![plot of chunk tps_ms](figure/tps_ms-66.png)![plot of chunk tps_ms](figure/tps_ms-67.png)![plot of chunk tps_ms](figure/tps_ms-68.png)![plot of chunk tps_ms](figure/tps_ms-69.png)![plot of chunk tps_ms](figure/tps_ms-70.png)![plot of chunk tps_ms](figure/tps_ms-71.png)![plot of chunk tps_ms](figure/tps_ms-72.png)![plot of chunk tps_ms](figure/tps_ms-73.png)![plot of chunk tps_ms](figure/tps_ms-74.png)![plot of chunk tps_ms](figure/tps_ms-75.png)![plot of chunk tps_ms](figure/tps_ms-76.png)![plot of chunk tps_ms](figure/tps_ms-77.png)![plot of chunk tps_ms](figure/tps_ms-78.png)![plot of chunk tps_ms](figure/tps_ms-79.png)![plot of chunk tps_ms](figure/tps_ms-80.png)![plot of chunk tps_ms](figure/tps_ms-81.png)![plot of chunk tps_ms](figure/tps_ms-82.png)![plot of chunk tps_ms](figure/tps_ms-83.png)![plot of chunk tps_ms](figure/tps_ms-84.png)![plot of chunk tps_ms](figure/tps_ms-85.png)![plot of chunk tps_ms](figure/tps_ms-86.png)![plot of chunk tps_ms](figure/tps_ms-87.png)![plot of chunk tps_ms](figure/tps_ms-88.png)![plot of chunk tps_ms](figure/tps_ms-89.png)![plot of chunk tps_ms](figure/tps_ms-90.png)![plot of chunk tps_ms](figure/tps_ms-91.png)![plot of chunk tps_ms](figure/tps_ms-92.png)![plot of chunk tps_ms](figure/tps_ms-93.png)![plot of chunk tps_ms](figure/tps_ms-94.png)![plot of chunk tps_ms](figure/tps_ms-95.png)![plot of chunk tps_ms](figure/tps_ms-96.png)![plot of chunk tps_ms](figure/tps_ms-97.png)![plot of chunk tps_ms](figure/tps_ms-98.png)![plot of chunk tps_ms](figure/tps_ms-99.png)![plot of chunk tps_ms](figure/tps_ms-100.png)![plot of chunk tps_ms](figure/tps_ms-101.png)![plot of chunk tps_ms](figure/tps_ms-102.png)![plot of chunk tps_ms](figure/tps_ms-103.png)![plot of chunk tps_ms](figure/tps_ms-104.png)![plot of chunk tps_ms](figure/tps_ms-105.png)![plot of chunk tps_ms](figure/tps_ms-106.png)![plot of chunk tps_ms](figure/tps_ms-107.png)![plot of chunk tps_ms](figure/tps_ms-108.png)![plot of chunk tps_ms](figure/tps_ms-109.png)![plot of chunk tps_ms](figure/tps_ms-110.png)![plot of chunk tps_ms](figure/tps_ms-111.png)![plot of chunk tps_ms](figure/tps_ms-112.png)![plot of chunk tps_ms](figure/tps_ms-113.png)![plot of chunk tps_ms](figure/tps_ms-114.png)![plot of chunk tps_ms](figure/tps_ms-115.png)![plot of chunk tps_ms](figure/tps_ms-116.png)![plot of chunk tps_ms](figure/tps_ms-117.png)![plot of chunk tps_ms](figure/tps_ms-118.png)![plot of chunk tps_ms](figure/tps_ms-119.png)![plot of chunk tps_ms](figure/tps_ms-120.png)![plot of chunk tps_ms](figure/tps_ms-121.png)![plot of chunk tps_ms](figure/tps_ms-122.png)![plot of chunk tps_ms](figure/tps_ms-123.png)![plot of chunk tps_ms](figure/tps_ms-124.png)![plot of chunk tps_ms](figure/tps_ms-125.png)![plot of chunk tps_ms](figure/tps_ms-126.png)![plot of chunk tps_ms](figure/tps_ms-127.png)![plot of chunk tps_ms](figure/tps_ms-128.png)![plot of chunk tps_ms](figure/tps_ms-129.png)![plot of chunk tps_ms](figure/tps_ms-130.png)![plot of chunk tps_ms](figure/tps_ms-131.png)![plot of chunk tps_ms](figure/tps_ms-132.png)![plot of chunk tps_ms](figure/tps_ms-133.png)![plot of chunk tps_ms](figure/tps_ms-134.png)![plot of chunk tps_ms](figure/tps_ms-135.png)![plot of chunk tps_ms](figure/tps_ms-136.png)![plot of chunk tps_ms](figure/tps_ms-137.png)![plot of chunk tps_ms](figure/tps_ms-138.png)![plot of chunk tps_ms](figure/tps_ms-139.png)![plot of chunk tps_ms](figure/tps_ms-140.png)![plot of chunk tps_ms](figure/tps_ms-141.png)![plot of chunk tps_ms](figure/tps_ms-142.png)![plot of chunk tps_ms](figure/tps_ms-143.png)![plot of chunk tps_ms](figure/tps_ms-144.png)![plot of chunk tps_ms](figure/tps_ms-145.png)![plot of chunk tps_ms](figure/tps_ms-146.png)![plot of chunk tps_ms](figure/tps_ms-147.png)![plot of chunk tps_ms](figure/tps_ms-148.png)![plot of chunk tps_ms](figure/tps_ms-149.png)![plot of chunk tps_ms](figure/tps_ms-150.png)![plot of chunk tps_ms](figure/tps_ms-151.png)![plot of chunk tps_ms](figure/tps_ms-152.png)![plot of chunk tps_ms](figure/tps_ms-153.png)![plot of chunk tps_ms](figure/tps_ms-154.png)![plot of chunk tps_ms](figure/tps_ms-155.png)![plot of chunk tps_ms](figure/tps_ms-156.png)![plot of chunk tps_ms](figure/tps_ms-157.png)![plot of chunk tps_ms](figure/tps_ms-158.png)![plot of chunk tps_ms](figure/tps_ms-159.png)![plot of chunk tps_ms](figure/tps_ms-160.png)

